<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Sales Importer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script type="module">
        import { ImportForm, TransactionsSearch } from './js/components.js'
        import { SalesFileUploadAdapter, TransactionSearchAdapter } from './js/adapters.js'
        import config from './js/config.js'

        document.addEventListener('DOMContentLoaded', function () {
          const salesFileUploadAdapter = new SalesFileUploadAdapter(config.backendUrl)
          window.importForm = new ImportForm(
            document.getElementById('fileImporterForm'),
            document.getElementById('messages'),
            salesFileUploadAdapter)

          const transactionSearchAdapter = new TransactionSearchAdapter(config.backendUrl)
          window.transactionsTable = new TransactionsSearch(
            document.getElementById('transactionsTable'),
            document.getElementById('searchTransactionsButton'),
            document.getElementById('transactionMessages'),
            transactionSearchAdapter)
        })
    </script>
</head>
<body>
<h1>Sales Importer</h1>
<div>
    <h2>Importação de arquivo</h2>
    <div id="messages"></div>
    <form id="fileImporterForm">
        <input type="file" name="file" required/><br>
        <button type="button" name="importButton">Importar</button>
    </form>
</div>
<div>
    <h2>Lista de transações</h2>
    <div id="transactionMessages"></div>
    <button type="button" id="searchTransactionsButton">Consultar</button>
    <table id="transactionsTable">
        <thead>
        <td>Tipo</td>
        <td>Produto</td>
        <td>Vendedor</td>
        <td>Valor</td>
        <td>Data</td>
        </thead>
        <tbody></tbody>
    </table>
</div>
</body>
</html>